(()=>{const e={debounce:(o,i=0,a=false)=>{let s;return(...e)=>{const t=()=>{s=null;if(!a)o(...e)};const n=a&&!s;clearTimeout(s);s=setTimeout(t,i);if(n)o(...e)}},throttle:function(o,i,a={}){let s,r,l;let d=0;const c=()=>{d=a.leading===false?0:(new Date).getTime();s=null;o.apply(r,l);if(!s)r=l=null};const e=(...e)=>{const t=(new Date).getTime();if(!d&&a.leading===false)d=t;const n=i-(t-d);r=this;l=e;if(n<=0||n>i){if(s){clearTimeout(s);s=null}d=t;o.apply(r,l);if(!s)r=l=null}else if(!s&&a.trailing!==false){s=setTimeout(c,n)}};return e},overflowPaddingR:{add:()=>{const e=window.innerWidth-document.body.clientWidth;if(e>0){document.body.style.paddingRight=`${e}px`;document.body.style.overflow="hidden";const t=document.querySelector("#page-header.nav-fixed #menus");if(t){t.style.paddingRight=`${e}px`}}},remove:()=>{document.body.style.paddingRight="";document.body.style.overflow="";const e=document.querySelector("#page-header.nav-fixed #menus");if(e){e.style.paddingRight=""}}},snackbarShow:(e,t=false,n=2e3)=>{const{position:o,bgLight:i,bgDark:a}=GLOBAL_CONFIG.Snackbar;const s=document.documentElement.getAttribute("data-theme")==="light"?i:a;Snackbar.show({text:e,backgroundColor:s,showAction:t,duration:n,pos:o,customClass:"snackbar-css"})},diffDate:(e,t=false)=>{const n=new Date;const o=new Date(e);const i=n-o;const a=i/1e3;const s=a/60;const r=s/60;const l=r/24;const d=l/30;const{dateSuffix:c}=GLOBAL_CONFIG;if(!t)return Math.floor(l);if(d>12)return o.toISOString().slice(0,10);if(d>=1)return`${Math.floor(d)} ${c.month}`;if(l>=1)return`${Math.floor(l)} ${c.day}`;if(r>=1)return`${Math.floor(r)} ${c.hour}`;if(s>=1)return`${Math.floor(s)} ${c.min}`;return c.just},loadComment:(e,t)=>{if("IntersectionObserver"in window){const n=new IntersectionObserver(e=>{if(e[0].isIntersecting){t();n.disconnect()}},{threshold:[0]});n.observe(e)}else{t()}},scrollToDest:(o,i=500)=>{const a=window.scrollY;const e=document.getElementById("page-header").classList.contains("fixed");if(a>o||e)o=o-70;if("scrollBehavior"in document.documentElement.style){window.scrollTo({top:o,behavior:"smooth"});return}const s=performance.now();const r=e=>{const t=e-s;const n=Math.min(t/i,1);window.scrollTo(0,a+(o-a)*n);if(n<1){requestAnimationFrame(r)}};requestAnimationFrame(r)},animateIn:(e,t)=>{e.style.display="block";e.style.animation=t},animateOut:(e,t)=>{const n=()=>{e.style.display="";e.style.animation="";e.removeEventListener("animationend",n)};e.addEventListener("animationend",n);e.style.animation=t},wrap:(e,t,n)=>{const o=document.createElement(t);for(const[i,a]of Object.entries(n)){o.setAttribute(i,a)}e.parentNode.insertBefore(o,e);o.appendChild(e)},isHidden:e=>e.offsetHeight===0&&e.offsetWidth===0,getEleTop:e=>{let t=e.offsetTop;let n=e.offsetParent;while(n!==null){t+=n.offsetTop;n=n.offsetParent}return t},loadLightbox:e=>{const t=GLOBAL_CONFIG.lightbox;if(t==="medium_zoom"){mediumZoom(e,{background:"var(--zoom-bg)"})}if(t==="fancybox"){Array.from(e).forEach(e=>{if(e.parentNode.tagName!=="A"){const t=e.dataset.lazySrc||e.src;const n=e.title||e.alt||"";btf.wrap(e,"a",{href:t,"data-fancybox":"gallery","data-caption":n,"data-thumb":t})}});if(!window.fancyboxRun){Fancybox.bind("[data-fancybox]",{Hash:false,Thumbs:{showOnStart:false},Images:{Panzoom:{maxScale:4}},Carousel:{transition:"slide"},Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY"],right:["slideshow","thumbs","close"]}}});window.fancyboxRun=true}}},setLoading:{add:e=>{const t=`
        <div class="loading-container">
          <div class="loading-item">
            <div></div><div></div><div></div><div></div><div></div>
          </div>
        </div>
      `;e.insertAdjacentHTML("afterend",t)},remove:e=>{e.nextElementSibling.remove()}},updateAnchor:e=>{if(e!==window.location.hash){if(!e)e=location.pathname;const t=GLOBAL_CONFIG_SITE.title;window.history.replaceState({url:location.href,title:t},t,e)}},getScrollPercent:(()=>{let o,i,a,s;return(e,t)=>{if(!o||t.clientHeight!==o){o=t.clientHeight;i=window.innerHeight;a=t.offsetTop;s=Math.max(o-i,document.documentElement.scrollHeight-i)}const n=(e-a)/s;return Math.max(0,Math.min(100,Math.round(n*100)))}})(),addEventListenerPjax:(e,t,n,o=false)=>{e.addEventListener(t,n,o);btf.addGlobalFn("pjaxSendOnce",()=>{e.removeEventListener(t,n,o)})},removeGlobalFnEvent:(e,t=window)=>{const n=t.globalFn||{};const o=n[e];if(!o)return;Object.keys(o).forEach(e=>o[e]());delete n[e]},switchComments:(e=document,t)=>{const n=e.querySelector("#switch-btn");if(!n)return;let o=false;const i=e.querySelector("#post-comment");const a=()=>{i.classList.toggle("move");if(!o&&typeof loadOtherComment==="function"){o=true;loadOtherComment(e,t)}};btf.addEventListenerPjax(n,"click",a)}};window.btf={...window.btf,...e}})();