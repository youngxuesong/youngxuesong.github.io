!function(){"use strict";const n={debounce:(e,i=30)=>{let n;return(...t)=>{clearTimeout(n);n=setTimeout(()=>e.apply(this,t),i)}},uuid:()=>{let i=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=(i+Math.random()*16)%16|0;i=Math.floor(i/16);return(t==="x"?e:e&3|8).toString(16)})}};class t{static sensors=new Map;static observe(t,e){const i=new ResizeObserver(n.debounce(()=>{e(t)}));i.observe(t);this.sensors.set(t,i)}static unobserve(t){const e=this.sensors.get(t);if(e){e.disconnect();this.sensors.delete(t)}}}class e{constructor(t,e={}){this.container=t;this.options={colorType:"rainbow",colors:["#FF6B6B","#4ECDC4","#45B7D1"],lineType:"gradient",particleCount:80,maxDistance:6e3,particleSize:2,lineWidth:1,opacity:.6,zIndex:-1,velocity:.8,speedVariation:.3,...e};this.initCanvas();this.initParticles();this.bindEvents();this.startAnimation()}initCanvas(){this.canvas=document.createElement("canvas");this.ctx=this.canvas.getContext("2d");Object.assign(this.canvas.style,{position:"absolute",top:"0",left:"0",zIndex:this.options.zIndex,opacity:this.options.opacity});this.container.appendChild(this.canvas);this.resizeCanvas()}resizeCanvas(){this.canvas.width=this.container.clientWidth;this.canvas.height=this.container.clientHeight}initParticles(){this.particles=Array.from({length:this.options.particleCount},(t,e)=>{const i=this.options.velocity*(1+this.options.speedVariation*(Math.random()-.5));return{id:e,x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height,vx:(Math.random()-.5)*i,vy:(Math.random()-.5)*i,color:this.generateColor(),connections:new Set}});this.mouse={x:null,y:null}}generateColor(){if(this.options.colorType==="custom"){return this.options.colors[Math.floor(Math.random()*this.options.colors.length)]}return`hsl(${Math.random()*360}, 70%, 60%)`}bindEvents(){t.observe(this.container,()=>this.resizeCanvas());this.mouseHandler=t=>{const e=this.container.getBoundingClientRect();this.mouse.x=t.clientX-e.left;this.mouse.y=t.clientY-e.top};this.container.addEventListener("mousemove",this.mouseHandler);this.container.addEventListener("mouseleave",()=>{this.mouse.x=null;this.mouse.y=null})}updateParticles(){this.particles.forEach(t=>{t.x+=t.vx*this.options.velocity;t.y+=t.vy*this.options.velocity;if(t.x<0||t.x>this.canvas.width)t.vx*=-1;if(t.y<0||t.y>this.canvas.height)t.vy*=-1;t.x=Math.max(0,Math.min(t.x,this.canvas.width));t.y=Math.max(0,Math.min(t.y,this.canvas.height))})}drawConnections(){const i=[...this.particles];if(this.mouse.x!==null)i.push(this.mouse);for(let e=0;e<i.length;e++){const n=i[e];for(let t=e+1;t<i.length;t++){const o=i[t];const s=n.x-o.x;const a=n.y-o.y;const c=s*s+a*a;if(c<this.options.maxDistance){const r=this.ctx.createLinearGradient(n.x,n.y,o.x,o.y);r.addColorStop(0,n.color);r.addColorStop(1,o.color||n.color);this.ctx.strokeStyle=this.options.lineType==="gradient"?r:n.color;this.ctx.lineWidth=this.options.lineWidth*(1-c/this.options.maxDistance);this.ctx.beginPath();this.ctx.moveTo(n.x,n.y);this.ctx.lineTo(o.x,o.y);this.ctx.stroke()}}}}drawParticles(){this.particles.forEach(t=>{this.ctx.fillStyle=t.color;this.ctx.fillRect(t.x-this.options.particleSize/2,t.y-this.options.particleSize/2,this.options.particleSize,this.options.particleSize)})}animate(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);this.updateParticles();this.drawConnections();this.drawParticles();requestAnimationFrame(()=>this.animate())}startAnimation(){this.animationFrame=requestAnimationFrame(()=>this.animate())}destroy(){cancelAnimationFrame(this.animationFrame);t.unobserve(this.container);this.container.removeEventListener("mousemove",this.mouseHandler);this.canvas.remove()}}new e(document.body,{colorType:"rainbow",lineType:"gradient",particleCount:80,lineWidth:2,particleSize:3,maxDistance:8e3,velocity:1.2,speedVariation:.3,zIndex:-1,opacity:.7});const i=new Date("2025-06-08T00:00:00").getTime();const o=[{value:31536e6,label:" 年"},{value:864e5,label:" 天"},{value:36e5,label:" 时"},{value:6e4,label:" 分"},{value:1e3,label:" 秒"}];let s=0;function a(t){let n=t;return o.map((t,e)=>{if(e<s)return null;const i=Math.floor(n/t.value);n%=t.value;return i>0?`${i}${t.label}`:""}).filter(Boolean).join(" ")}function c(){const t=Date.now();const e=a(t-i);document.getElementById("runtime").textContent=`本站已运行：${e}`}document.getElementById("runtime").addEventListener("click",()=>{s=(s+1)%4;c()});c();setInterval(c,1e3)}();const categoryItems=document.querySelectorAll(".category-list-item");categoryItems.forEach((i,t)=>{function e(){const t=Math.floor(Math.random()*360);const e=`linear-gradient(${t}deg, #${Math.floor(Math.random()*16777215).toString(16)} 0%, #${Math.floor(Math.random()*16777215).toString(16)} 100%)`;i.style.backgroundImage=e}const n=["📑","📚","🦋","💻","💬","✨"];const o=n[Math.floor(Math.random()*n.length)];i.innerHTML=`
    <div>${i.innerHTML}</div>
    <div class="category-list-icon">${o}</div>`;e()});function postAddToc(){const t=document.querySelector("#post > #article-container.post-content");const e=document.getElementById("card-toc");if(t&&e){const i=e.querySelectorAll(".toc-link");const o={};i.forEach(t=>{const e=decodeURIComponent(t.getAttribute("href").slice(1));const i=document.getElementById(e);const n=t.querySelector(".toc-number").textContent;if(i){o[e]={element:i,tocNumber:n}}});Object.entries(o).forEach(([t,{element:e,tocNumber:i}])=>{e.dataset.toc=i})}}postAddToc();